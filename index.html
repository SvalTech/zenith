<!DOCTYPE html>
<html lang="en" class="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="An exam tracker for JEE & NEET aspirants. Track tasks, mocks, and progress.">
    <meta name="theme-color" content="#7c3aed">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Emoji Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ¯</text></svg>">
    <title>Zenith - sval.tech</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#f5f3ff', 100: '#ede9fe', 200: '#ddd6fe', 300: '#c4b5fd', 400: '#a78bfa',
                            500: '#8b5cf6', 600: '#7c3aed', 700: '#6d28d9', 800: '#5b21b6', 900: '#4c1d95', 950: '#2e1065',
                        }
                    },
                    height: { screen: '100dvh' },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-up': 'slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'bounce-slight': 'bounceSlight 1.5s ease-in-out infinite',
                        'spin-slow': 'spin 4s linear infinite',
                        'scale-in': 'scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'fade-in': 'fadeIn 0.3s ease-out forwards',
                        'slide-up-fade': 'slideUpFade 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'slide-right-fade': 'slideRightFade 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-15px)' } },
                        slideUp: { '0%': { transform: 'translateY(20px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
                        bounceSlight: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-4px)' } },
                        scaleIn: { '0%': { transform: 'scale(0.95)', opacity: '0' }, '100%': { transform: 'scale(1)', opacity: '1' } },
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUpFade: { '0%': { transform: 'translateY(15px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
                        slideRightFade: { '0%': { transform: 'translateX(-15px)', opacity: '0' }, '100%': { transform: 'translateX(0)', opacity: '1' } }
                    },
                    boxShadow: {
                        'soft': '0 4px 40px rgba(0, 0, 0, 0.03)',
                        'glow': '0 0 30px rgba(124, 58, 237, 0.3)',
                        'glow-sm': '0 0 15px rgba(124, 58, 237, 0.2)',
                        'floating': '0 20px 40px -10px rgba(0,0,0,0.1)',
                        'floating-dark': '0 20px 40px -10px rgba(0,0,0,0.5)',
                        'inner-light': 'inset 0 1px 0 0 rgba(255, 255, 255, 0.6)',
                        'inner-dark': 'inset 0 1px 0 0 rgba(255, 255, 255, 0.05)',
                    },
                }
            }
        }
    </script>
    <link rel="stylesheet" href="styles.css">
</head>

<body
    class="h-screen flex flex-col md:flex-row overflow-hidden text-zinc-800 bg-zinc-50 dark:bg-[#09090b] dark:text-zinc-100 transition-colors duration-500 selection:bg-brand-500 selection:text-white">

    <div id="app-background"></div>

    <!-- Enhanced Login Screen -->
    <div id="login-screen"
        class="fixed inset-0 z-[70] bg-zinc-50 dark:bg-[#09090b] overflow-y-auto overflow-x-hidden custom-scrollbar transition-opacity duration-500 hidden">
        <div class="fixed inset-0 overflow-hidden pointer-events-none">
            <div
                class="absolute -top-[20%] -right-[10%] w-[800px] h-[800px] bg-brand-500/10 rounded-full blur-[120px] animate-pulse-slow">
            </div>
            <div
                class="absolute top-[20%] -left-[10%] w-[600px] h-[600px] bg-fuchsia-500/10 rounded-full blur-[100px] animate-float">
            </div>
        </div>

        <nav class="sticky top-0 z-50 glass border-b border-zinc-200/50 dark:border-zinc-800/50 px-6 py-4">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div
                        class="w-10 h-10 bg-gradient-to-br from-brand-500 to-fuchsia-600 rounded-xl flex items-center justify-center text-white text-xl shadow-md shrink-0">
                        ðŸŽ¯</div>
                    <div class="flex flex-col justify-center">
                        <h1 class="text-2xl font-black text-zinc-900 dark:text-white tracking-tight leading-none">Zenith</h1>
                        <span class="text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest mt-0.5">by
                            sval.tech</span>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <button onclick="signInWithGoogle()"
                        class="px-6 py-2.5 rounded-full bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 text-sm font-bold hover:scale-105 active:scale-95 transition-all shadow-xl">
                        Sign In
                    </button>
                </div>
            </div>
        </nav>

        <header class="max-w-7xl mx-auto px-6 min-h-[calc(100vh-100px)] flex flex-col justify-center items-center relative">
            <div class="space-y-8 relative z-10 animate-slide-up text-center lg:text-left mt-4 lg:mt-0">
                <h1
                    class="text-6xl md:text-7xl lg:text-8xl font-black text-zinc-900 dark:text-white tracking-tighter leading-[1.05]">
                    Master your <br>
                    <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-brand-500 via-fuchsia-500 to-pink-500">Daily
                        Chaos.</span>
                </h1>
                <p
                    class="text-lg md:text-xl text-zinc-600 dark:text-zinc-400 max-w-2xl mx-auto lg:mx-0 leading-relaxed font-medium">
                    Designed for high-performance JEE & NEET aspirants. Plan your day, track deep work, analyze mocks,
                    and <strong class="text-zinc-900 dark:text-white">win consistently.</strong>
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start pt-4">
                    <button onclick="signInWithGoogle()"
                        class="px-8 py-4 rounded-2xl bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 font-bold text-lg shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-3">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
                            class="w-6 h-6 bg-white rounded-full p-0.5" alt="Google">
                        <span>Continue with Google</span>
                    </button>
                </div>
            </div>
        </header>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay"
        class="fixed inset-0 z-[100] bg-zinc-50 dark:bg-[#09090b] flex items-center justify-center transition-opacity duration-500">
        <div class="flex flex-col items-center gap-4">
            <div
                class="w-16 h-16 bg-gradient-to-br from-brand-500 to-fuchsia-600 rounded-2xl flex items-center justify-center text-white text-3xl shadow-glow animate-pulse-slow">
                ðŸŽ¯</div>
            <div class="flex flex-col items-center gap-2">
                <div class="text-2xl font-black text-zinc-900 dark:text-white tracking-tighter">Zenith</div>
                <div class="text-xs font-bold text-zinc-400 uppercase tracking-widest">by sval.tech</div>
            </div>
            <div class="spinner w-6 h-6 border-brand-500 border-t-transparent mt-2"></div>
        </div>
    </div>

    <!-- Desktop Sidebar -->
    <aside
        class="hidden md:flex w-[320px] bg-white/80 dark:bg-[#18181b]/90 backdrop-blur-2xl border-r border-zinc-200/50 dark:border-zinc-800/50 flex-col shrink-0 z-[50] relative h-full transition-transform duration-300 shadow-floating"
        id="desktop-sidebar">
        <!-- Header -->
        <div class="p-6 shrink-0">
            <div class="flex items-center justify-between mb-8">
                <div class="flex items-center gap-3">
                    <div
                        class="w-10 h-10 bg-gradient-to-br from-brand-500 to-fuchsia-600 rounded-xl flex items-center justify-center text-white text-xl shadow-lg shadow-brand-500/30 shadow-inner-light">
                        ðŸŽ¯</div>
                    <div class="flex flex-col">
                        <span class="text-2xl font-black text-zinc-900 dark:text-white tracking-tighter leading-none">Zenith</span>
                        <span class="text-[10px] font-bold text-zinc-400 uppercase tracking-widest">by sval.tech</span>
                    </div>
                </div>
                <button onclick="openSettings()"
                    class="p-2 text-zinc-400 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800/50 rounded-xl transition-colors"><i
                        data-lucide="settings" class="w-5 h-5"></i></button>
            </div>

            <!-- Enhanced Countdown Card -->
            <div id="desktop-countdown-card"
                class="bg-gradient-to-br from-white to-zinc-50 dark:from-zinc-900 dark:to-[#18181b] border border-zinc-200/80 dark:border-zinc-800 rounded-[2rem] p-6 shadow-soft relative overflow-hidden group mb-8 transition-all duration-300">
                <div
                    class="absolute -right-4 -top-4 w-32 h-32 bg-brand-500/10 rounded-full blur-2xl group-hover:bg-brand-500/20 transition-colors">
                </div>
                <div class="relative z-10">
                    <div class="text-zinc-500 dark:text-zinc-400 text-[10px] font-bold mb-1 uppercase tracking-widest">
                        Time to Target</div>
                    <div class="flex items-baseline gap-1.5 mb-2"><span id="days-left-desktop"
                            class="text-5xl font-black text-zinc-900 dark:text-white tracking-tighter">--</span><span
                            class="text-sm font-bold text-zinc-400">Days</span></div>
                    <div id="target-date-display-desktop"
                        class="text-[10px] font-bold text-zinc-400 dark:text-zinc-500 tracking-wide">Goal: --</div>
                </div>
            </div>

            <nav class="flex flex-col gap-1.5 p-1.5 bg-zinc-100/80 dark:bg-zinc-900/80 rounded-2xl mb-6">
                <div class="flex w-full gap-1.5">
                    <button onclick="switchView('calendar')" id="nav-desktop-calendar"
                        class="flex-1 py-2.5 text-xs font-bold rounded-xl transition-all flex items-center justify-center gap-2 bg-white dark:bg-zinc-800 shadow-sm text-brand-600 dark:text-brand-400"><i
                            data-lucide="calendar" class="w-4 h-4"></i> Planner</button>
                    <button onclick="switchView('weekly')" id="nav-desktop-weekly"
                        class="flex-1 py-2.5 text-xs font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50"><i
                            data-lucide="crosshair" class="w-4 h-4"></i> Targets</button>
                </div>
                <div class="flex w-full gap-1.5">
                    <button onclick="switchView('timer')" id="nav-desktop-timer"
                        class="flex-1 py-2.5 text-xs font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50"><i
                            data-lucide="timer" class="w-4 h-4"></i> Timer</button>
                    <div class="flex-1 relative group">
                        <button onclick="switchView('stats-mocks')" id="nav-desktop-stats"
                            class="w-full py-2.5 text-xs font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50">
                            <i data-lucide="bar-chart-2" class="w-4 h-4"></i> Stats
                        </button>
                        <!-- Desktop Hover Menu (Fixed Bridge) -->
                        <div
                            class="absolute left-full top-0 pl-2 w-52 z-[100] opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition-opacity duration-200 flex">
                            <div
                                class="bg-white/95 dark:bg-[#18181b]/95 backdrop-blur-xl rounded-2xl shadow-floating dark:shadow-floating-dark border border-zinc-200/80 dark:border-zinc-800 flex flex-col w-full scale-95 group-hover:scale-100 transition-transform duration-200 origin-left overflow-hidden">
                                <button onclick="switchView('stats-mocks')"
                                    class="text-left px-4 py-3 text-xs font-bold text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors flex items-center gap-3"><i
                                        data-lucide="bar-chart" class="w-4 h-4 text-brand-500"></i> Mocks Data</button>
                                <button onclick="switchView('stats-errors')"
                                    class="text-left px-4 py-3 text-xs font-bold text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors flex items-center gap-3 border-t border-zinc-100 dark:border-zinc-800/50"><i
                                        data-lucide="alert-triangle" class="w-4 h-4 text-rose-500"></i> Error Tracking</button>
                                <button onclick="switchView('stats-questions')"
                                    class="text-left px-4 py-3 text-xs font-bold text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors flex items-center gap-3 border-t border-zinc-100 dark:border-zinc-800/50"><i
                                        data-lucide="check-square" class="w-4 h-4 text-emerald-500"></i> Daily Questions</button>
                            </div>
                        </div>
                    </div>
                    <button onclick="switchView('syllabus')" id="nav-desktop-syllabus"
                        class="flex-1 py-2.5 text-xs font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50"><i
                            data-lucide="book-open-check" class="w-4 h-4"></i> Syllabus</button>
                </div>
            </nav>
        </div>

        <div id="desktop-add-task-container" class="flex-1 overflow-y-auto px-6 pb-6 space-y-6 custom-scrollbar">
            <div class="flex items-center gap-2 mb-2">
                <div class="w-1 h-4 bg-brand-500 rounded-full"></div>
                <h2 class="text-sm font-bold text-zinc-900 dark:text-white tracking-tight">Quick Add Task</h2>
            </div>
            <form id="add-task-form" class="space-y-5">
                <input type="date" id="task-date"
                    class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3.5 text-sm focus:ring-2 focus:ring-brand-500/30 focus:border-brand-500 outline-none dark:text-white transition-all shadow-inner-light dark:shadow-inner-dark font-medium">
                <div>
                    <div class="flex justify-between items-center mb-2.5">
                        <label
                            class="block text-[10px] font-bold text-zinc-500 uppercase tracking-widest">Subject</label>
                        <button type="button" onclick="openCustomSubjectModal()"
                            class="text-[10px] font-bold text-brand-600 dark:text-brand-400 hover:bg-brand-50 dark:hover:bg-brand-900/30 px-2 py-1 rounded transition-colors">+
                            Manage</button>
                    </div>
                    <div id="subject-selector" class="grid grid-cols-2 gap-2"></div>
                </div>
                <div id="mock-fields-container"
                    class="hidden animate-slide-up space-y-4 p-4 bg-fuchsia-50/50 dark:bg-fuchsia-900/10 rounded-2xl border border-fuchsia-100 dark:border-fuchsia-900/30">
                    <div class="flex items-center gap-2 mb-2 text-fuchsia-700 dark:text-fuchsia-300">
                        <i data-lucide="trophy" class="w-4 h-4"></i><span
                            class="text-xs font-bold uppercase tracking-wide">Score Details</span>
                    </div>
                </div>
                <textarea id="task-input" rows="2" placeholder="What's the objective?"
                    class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3.5 text-sm focus:ring-2 focus:ring-brand-500/30 focus:border-brand-500 outline-none dark:text-white resize-none transition-all shadow-inner-light dark:shadow-inner-dark font-medium placeholder:text-zinc-400"></textarea>
                <button id="btn-add-task" type="submit"
                    class="w-full bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 font-bold py-3.5 rounded-xl shadow-floating dark:shadow-white/10 transition-all active:scale-95 flex items-center justify-center gap-2 hover:-translate-y-0.5">
                    <i data-lucide="plus" class="w-4 h-4 text-brand-400 dark:text-brand-600"></i> <span>Add to
                        Plan</span>
                </button>
            </form>
        </div>

        <div
            class="p-5 border-t border-zinc-100 dark:border-zinc-800/50 bg-zinc-50/80 dark:bg-[#18181b]/80 backdrop-blur-xl">
            <div class="flex items-center gap-3">
                <div id="user-avatar-desktop"
                    class="w-10 h-10 rounded-full bg-brand-100 dark:bg-brand-900/50 flex items-center justify-center text-brand-600 dark:text-brand-400 font-bold text-sm ring-2 ring-white dark:ring-zinc-800 shadow-sm overflow-hidden">
                    U</div>
                <div class="flex-1 min-w-0">
                    <p id="user-name-desktop" class="text-xs font-bold text-zinc-900 dark:text-white truncate">User</p>
                    <p id="user-email-desktop" class="text-[10px] text-zinc-500 truncate font-medium">Syncing...</p>
                </div>
                <button onclick="handleSignOut()"
                    class="p-2.5 text-zinc-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition-colors"
                    title="Sign Out"><i data-lucide="log-out" class="w-4 h-4"></i></button>
            </div>
        </div>
    </aside>

    <main id="main-content-area"
        class="flex-1 flex flex-col h-full overflow-hidden relative bg-transparent touch-pan-x z-10">
        <!-- Mobile Header -->
        <!-- Mobile Header -->
        <!-- Changed: Removed mx-2, mt-2, rounded-2xl. Added w-full and adjusted padding -->
        <div
            class="md:hidden glass border-b border-zinc-200/50 dark:border-zinc-800/50 p-3.5 px-4 flex justify-between items-center z-20 sticky top-0 shadow-sm w-full">
            <div class="flex items-center gap-3">
                <div
                    class="w-9 h-9 bg-gradient-to-br from-brand-500 to-fuchsia-600 rounded-lg flex items-center justify-center text-white text-sm shadow-md shrink-0">
                    ðŸŽ¯</div>
                <div class="flex flex-col justify-center">
                    <h1 class="font-black text-lg text-zinc-900 dark:text-white tracking-tight leading-none">Zenith</h1>
                    <span class="text-[9px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest">by
                        sval.tech</span>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <div id="mobile-countdown-pill"
                    class="hidden px-3 py-1.5 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center gap-1.5">
                    <span id="days-left-mobile"
                        class="text-[10px] font-black uppercase tracking-wide text-zinc-700 dark:text-zinc-300">-- days</span>
                </div>
                <button onclick="openSettings()"
                    class="w-8 h-8 flex items-center justify-center bg-zinc-100 dark:bg-zinc-800 rounded-full text-zinc-600 dark:text-zinc-300 active:scale-95 transition-transform"><i
                        data-lucide="settings" class="w-4 h-4"></i></button>
            </div>
        </div>

        <!-- VIEW: Calendar -->
        <div id="view-container-calendar" class="view-section flex-1 flex flex-col h-full overflow-hidden">
            <!-- Planner scroll area -->
            <div class="flex-1 overflow-y-auto custom-scrollbar no-scrollbar relative scroll-smooth"
                id="calendar-scroll-area">

                <!-- Sticky blurred toolbar inside scroll area -->
                <div id="toolbar-calendar"
                    class="sticky top-0 z-30 glass px-4 md:px-8 py-4 flex items-center justify-between border-b border-zinc-200/50 dark:border-zinc-800/50">
                    <div class="flex items-center gap-4">
                        <div
                            class="flex gap-1 bg-white/80 dark:bg-[#18181b]/80 backdrop-blur-md rounded-full p-1 border border-zinc-200 dark:border-zinc-700 shadow-sm">
                            <button onclick="changeMonth(-1)"
                                class="p-1.5 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full transition-colors active:scale-95 text-zinc-600 dark:text-zinc-400"><i
                                    data-lucide="chevron-left" class="w-5 h-5 md:w-4 md:h-4"></i></button>
                            <button onclick="changeMonth(1)"
                                class="p-1.5 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full transition-colors active:scale-95 text-zinc-600 dark:text-zinc-400"><i
                                    data-lucide="chevron-right" class="w-5 h-5 md:w-4 md:h-4"></i></button>
                        </div>
                        <h2 id="current-month-display"
                            class="text-2xl md:text-3xl font-black text-zinc-900 dark:text-white tracking-tighter">--
                        </h2>
                    </div>
                    <button onclick="goToToday()"
                        class="text-xs font-bold bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 px-4 py-2 rounded-full hover:shadow-lg transition-all active:scale-95 flex items-center gap-1.5"><i
                            data-lucide="calendar" class="w-3.5 h-3.5 opacity-70"></i> Today</button>
                </div>

                <div id="calendar-grid"
                    class="p-4 md:p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-5 pb-32 max-w-7xl mx-auto">
                </div>
            </div>
        </div>

        <!-- VIEW: Weekly Goals -->
        <div id="view-container-weekly" class="view-section hidden flex-1 flex flex-col h-full overflow-hidden">
            <div class="flex-1 overflow-y-auto custom-scrollbar no-scrollbar relative">
                <!-- Sticky blurred toolbar inside scroll area -->
                <div
                    class="sticky top-0 z-30 glass px-4 md:px-8 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-zinc-200/50 dark:border-zinc-800/50 w-full">
                    <div>
                        <h2 class="text-2xl md:text-3xl font-black text-zinc-900 dark:text-white tracking-tighter">
                            Targets</h2>
                    </div>
                    <div
                        class="flex items-center gap-2 bg-white/80 dark:bg-[#18181b]/80 backdrop-blur-md p-1.5 rounded-2xl shadow-sm border border-zinc-200 dark:border-zinc-700 self-start md:self-auto">
                        <button onclick="changeWeek(-1)"
                            class="p-1.5 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-colors active:scale-95 text-zinc-600 dark:text-zinc-400"><i
                                data-lucide="chevron-left" class="w-4 h-4"></i></button>
                        <div class="text-center min-w-[120px]">
                            <div class="text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0.5">Week Of
                            </div>
                            <div id="weekly-date-range" class="text-xs font-bold text-zinc-800 dark:text-zinc-200">--
                            </div>
                        </div>
                        <button onclick="changeWeek(1)"
                            class="p-1.5 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-colors active:scale-95 text-zinc-600 dark:text-zinc-400"><i
                                data-lucide="chevron-right" class="w-4 h-4"></i></button>
                    </div>
                </div>

                <div class="p-4 md:p-8 pb-32 max-w-3xl mx-auto space-y-6">
                    <!-- Progress Card -->
                    <div
                        class="glass-card p-6 md:p-8 rounded-[2rem] flex items-center justify-between relative overflow-hidden">
                        <div
                            class="absolute inset-0 bg-gradient-to-r from-brand-500/5 to-transparent pointer-events-none">
                        </div>
                        <div class="relative z-10">
                            <div class="text-xs font-bold text-zinc-500 uppercase tracking-widest mb-2">Weekly
                                Completion</div>
                            <div id="weekly-progress-text"
                                class="text-5xl md:text-6xl font-black text-zinc-900 dark:text-white tracking-tighter">
                                0%</div>
                            <p class="text-xs font-medium text-zinc-500 mt-2 bg-zinc-100 dark:bg-zinc-800/50 inline-block px-2.5 py-1 rounded-md"
                                id="weekly-count-text">0/0 Completed</p>
                        </div>
                        <div class="w-24 h-24 md:w-32 md:h-32 relative">
                            <!-- SVG setup for exactly sizing the ring accurately mapped to viewBox so percentage doesn't break depending on pixel bounds -->
                            <svg class="w-full h-full transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="8"
                                    fill="transparent" class="text-zinc-100 dark:text-zinc-800" />
                                <circle id="weekly-ring" cx="50" cy="50" r="40" stroke="currentColor"
                                    stroke-width="8" fill="transparent" stroke-dasharray="251.3"
                                    stroke-dashoffset="251.3"
                                    class="text-brand-500 transition-all duration-1000 ease-out"
                                    stroke-linecap="round" />
                            </svg>
                        </div>
                    </div>

                    <!-- Input -->
                    <div
                        class="flex gap-2 bg-white dark:bg-[#18181b] p-2 rounded-2xl border border-zinc-200/80 dark:border-zinc-800 shadow-sm">
                        <input type="text" id="target-input" placeholder="e.g. Master Electrostatics concepts..."
                            class="flex-1 bg-transparent border-none px-4 py-3 text-sm focus:outline-none dark:text-white font-medium placeholder:text-zinc-400">
                        <button onclick="addWeeklyTarget()"
                            class="bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 px-6 rounded-xl font-bold shadow-md active:scale-95 transition-transform">Add</button>
                    </div>

                    <!-- List -->
                    <div id="weekly-list" class="space-y-3 pb-10"></div>
                </div>
            </div>
        </div>

        <!-- VIEW: Timer -->
        <div id="view-container-timer" class="view-section hidden flex-1 flex flex-col h-full overflow-hidden">
            <div class="flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar no-scrollbar">
                <div class="max-w-4xl mx-auto pb-32 space-y-6 md:space-y-8 mt-2 md:mt-4">

                    <!-- Adjusted classes specifically modifying the ordering logic for mobile -->
                    <div class="flex flex-col lg:grid lg:grid-cols-2 gap-6 md:gap-8 timer-mobile-layout">
                        <!-- Main Timer Column -->
                        <div
                            class="glass-card p-6 md:p-10 rounded-[2.5rem] text-center relative overflow-hidden flex flex-col justify-center timer-main">
                            <div class="mb-6 md:mb-8">
                                <label
                                    class="text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 block">Focus
                                    Subject</label>
                                <div id="timer-subject-selector" class="flex flex-wrap gap-2 justify-center"></div>
                            </div>
                            <div
                                class="relative w-56 h-56 md:w-72 md:h-72 mx-auto mb-8 flex items-center justify-center">
                                <div
                                    class="absolute inset-0 rounded-full border-[1.5px] border-zinc-200 dark:border-zinc-800 scale-[1.05]">
                                </div>
                                <div
                                    class="absolute inset-0 rounded-full border-4 border-zinc-100 dark:border-zinc-800/50">
                                </div>
                                <div id="timer-active-ring"
                                    class="absolute inset-0 rounded-full border-4 border-brand-500 border-t-transparent opacity-0 transition-opacity duration-300">
                                </div>
                                <div class="text-4xl md:text-6xl font-black text-zinc-900 dark:text-white tabular-nums tracking-tighter"
                                    id="timer-display">
                                    00:00:00
                                </div>
                            </div>
                            <div class="flex items-center justify-center gap-4">
                                <button id="btn-timer-toggle" onclick="toggleTimer()"
                                    class="w-14 h-14 md:w-16 md:h-16 rounded-2xl bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 flex items-center justify-center shadow-floating active:scale-95 transition-all">
                                    <i data-lucide="play" class="w-6 h-6 md:w-8 md:h-8 fill-current"></i>
                                </button>
                                <button id="btn-timer-stop" onclick="stopTimer()" disabled
                                    class="w-14 h-14 md:w-16 md:h-16 rounded-2xl bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-rose-50 hover:text-rose-500 dark:hover:bg-rose-900/20 dark:hover:text-rose-400 flex items-center justify-center transition-all active:scale-95 border border-transparent hover:border-rose-200 dark:hover:border-rose-900/50">
                                    <i data-lucide="square" class="w-5 h-5 md:w-6 md:h-6 fill-current"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Secondary Info Column wrapper acting smartly with display contents mapped explicitly -->
                        <div class="flex flex-col gap-6 md:gap-8 timer-right-col contents lg:flex">
                            <!-- Stats Row -->
                            <div class="grid grid-cols-2 gap-4 timer-stats">
                                <div class="glass-card p-5 rounded-[2rem] flex items-center gap-4">
                                    <div
                                        class="w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center text-white shadow-lg shadow-orange-500/20">
                                        <i data-lucide="flame" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <div class="text-[10px] font-bold text-zinc-500 uppercase tracking-widest">
                                            Streak</div>
                                        <div class="text-2xl font-black text-zinc-900 dark:text-white"><span
                                                id="streak-count">0</span> <span
                                                class="text-sm font-bold text-zinc-400">Days</span></div>
                                    </div>
                                </div>
                                <div class="glass-card p-5 rounded-[2rem] flex items-center gap-4">
                                    <div
                                        class="w-12 h-12 rounded-2xl bg-gradient-to-br from-brand-400 to-brand-600 flex items-center justify-center text-white shadow-lg shadow-brand-500/20">
                                        <i data-lucide="clock" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <div class="text-[10px] font-bold text-zinc-500 uppercase tracking-widest">Today
                                        </div>
                                        <div class="text-2xl font-black text-zinc-900 dark:text-white" id="today-total">
                                            0m</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Weekly Study Trends Chart -->
                            <div class="glass-card p-5 md:p-6 rounded-[2.5rem] flex-1 flex flex-col timer-chart">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white tracking-tight">Study
                                        Trends</h3>
                                    <div class="flex items-center gap-2 bg-zinc-100 dark:bg-zinc-800 rounded-lg p-1">
                                        <button onclick="changeTimerChartWeek(-1)"
                                            class="p-1 text-zinc-500 hover:text-zinc-900 dark:hover:text-white"><i
                                                data-lucide="chevron-left" class="w-3.5 h-3.5"></i></button>
                                        <span id="timer-chart-week-label"
                                            class="text-[10px] font-bold text-zinc-600 dark:text-zinc-300 w-20 text-center">This
                                            Week</span>
                                        <button onclick="changeTimerChartWeek(1)"
                                            class="p-1 text-zinc-500 hover:text-zinc-900 dark:hover:text-white"><i
                                                data-lucide="chevron-right" class="w-3.5 h-3.5"></i></button>
                                    </div>
                                </div>
                                <div class="relative flex-1 w-full min-h-[140px]">
                                    <canvas id="timerChart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recent Logs moved within grid scope for ordering on mobile view explicitly -->
                        <div class="pt-2 w-full lg:col-span-2 timer-logs">
                            <div class="flex items-center justify-between mb-4 px-2">
                                <h3 class="text-lg font-black text-zinc-900 dark:text-white tracking-tight">Today's Sessions
                                </h3>
                                <button onclick="openManualLogModal()"
                                    class="text-xs font-bold text-brand-600 dark:text-brand-400 hover:bg-brand-50 dark:hover:bg-brand-900/20 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1"><i
                                        data-lucide="plus" class="w-3 h-3"></i> Manual Log</button>
                            </div>
                            <div id="timer-logs-list" class="space-y-3"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: Stats -->
        <div id="view-container-stats-mocks"
            class="view-section hidden flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar no-scrollbar">
            <div class="max-w-5xl mx-auto pb-32">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-8 px-2 gap-4">
                    <h2 class="text-3xl md:text-4xl font-black text-zinc-900 dark:text-white tracking-tighter">Analytics</h2>
                    <button onclick="openAddMockFromStats()" class="text-xs font-bold bg-brand-600 hover:bg-brand-700 text-white px-4 py-2.5 rounded-xl transition-all shadow-md active:scale-95 flex items-center gap-1.5 self-start md:self-auto"><i data-lucide="plus" class="w-4 h-4"></i> Add Mock</button>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="glass-card p-6 rounded-[2rem] border-t-2 border-t-brand-500">
                        <div class="text-[10px] md:text-xs text-zinc-500 uppercase font-bold tracking-widest mb-2">Tests
                            Taken</div>
                        <div id="stats-total-tests"
                            class="text-3xl md:text-4xl font-black text-zinc-900 dark:text-white">0</div>
                    </div>
                    <div class="glass-card p-6 rounded-[2rem] border-t-2 border-t-fuchsia-500">
                        <div class="text-[10px] md:text-xs text-zinc-500 uppercase font-bold tracking-widest mb-2">Avg
                            Score</div>
                        <div id="stats-avg-score" class="text-3xl md:text-4xl font-black text-zinc-900 dark:text-white">
                            0</div>
                    </div>
                    <div class="glass-card p-6 rounded-[2rem] border-t-2 border-t-emerald-500">
                        <div class="text-[10px] md:text-xs text-zinc-500 uppercase font-bold tracking-widest mb-2">Best
                            Score</div>
                        <div id="stats-max-score" class="text-3xl md:text-4xl font-black text-emerald-500">0</div>
                    </div>
                    <div class="glass-card p-6 rounded-[2rem] border-t-2 border-t-blue-500">
                        <div class="text-[10px] md:text-xs text-zinc-500 uppercase font-bold tracking-widest mb-2">
                            Recent Trend</div>
                        <div id="stats-last-5" class="text-3xl md:text-4xl font-black text-blue-500">0</div>
                    </div>
                </div>

                <div class="glass-card p-5 md:p-8 rounded-[2rem] mb-10">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
                        <h3 class="text-lg font-black text-zinc-900 dark:text-white tracking-tight">Performance
                            Trajectory</h3>
                        <div id="chart-filters" class="flex flex-wrap gap-2"></div>
                    </div>
                    <div class="relative h-72 md:h-80 w-full">
                        <canvas id="mockChart"></canvas>
                    </div>
                </div>

                <h3 class="text-xl font-black text-zinc-900 dark:text-white mb-6 tracking-tight px-2">Test History</h3>
                <div id="mock-history-list" class="space-y-4 pb-12"></div>
            </div>

            
        </div>
        

        <!-- VIEW: Error Tracking -->
        <div id="view-container-stats-errors"
            class="view-section hidden flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar no-scrollbar">
            <div class="max-w-4xl mx-auto pb-32">
                <h2
                    class="text-3xl md:text-4xl font-black text-zinc-900 dark:text-white tracking-tighter mb-8 px-2 flex items-center gap-3">
                    <i data-lucide="alert-triangle" class="w-8 h-8 text-rose-500"></i> Error Log
                </h2>
        
                <div class="glass-card p-6 rounded-[2rem] mb-8">
                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white tracking-tight mb-4">Log a New Mistake</h3>
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label
                                    class="block text-[10px] font-bold text-zinc-500 mb-1.5 uppercase tracking-widest">Subject</label>
                                <select id="error-subject"
                                    class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3 text-sm outline-none dark:text-white font-medium shadow-inner-light appearance-none"></select>
                            </div>
                            <div>
                                <label class="block text-[10px] font-bold text-zinc-500 mb-1.5 uppercase tracking-widest">Topic
                                    / Chapter</label>
                                <input type="text" id="error-topic" placeholder="e.g. Rotational Motion"
                                    class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3 text-sm outline-none dark:text-white font-medium shadow-inner-light">
                            </div>
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold text-zinc-500 mb-1.5 uppercase tracking-widest">Mistake
                                Description</label>
                            <textarea id="error-desc" rows="2" placeholder="What went wrong and how to avoid it next time?"
                                class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3 text-sm outline-none dark:text-white font-medium shadow-inner-light resize-none placeholder:text-zinc-400"></textarea>
                        </div>
                        <button onclick="saveErrorLog()"
                            class="bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 px-6 rounded-xl shadow-md transition-all active:scale-95 flex items-center justify-center gap-2">
                            <i data-lucide="plus" class="w-4 h-4"></i> Log Mistake
                        </button>
                    </div>
                </div>
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 px-2 gap-4">
                    <h3 class="text-xl font-black text-zinc-900 dark:text-white tracking-tight shrink-0">Recent Errors</h3>
                    <div id="error-filters"
                        class="flex gap-2 overflow-x-auto no-scrollbar pb-2 md:pb-0 w-full md:w-auto mask-fade-edges">
                        <!-- Filters injected by JS -->
                    </div>
                </div>
                <!-- Changed to a Grid Layout -->
                <div id="error-logs-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-5 pb-12"></div>
            </div>
        </div>
        
        <!-- VIEW: Daily Questions -->
        <div id="view-container-stats-questions"
            class="view-section hidden flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar no-scrollbar">
            <div class="max-w-4xl mx-auto pb-32">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-8 px-2 gap-4">
                    <h2
                        class="text-3xl md:text-4xl font-black text-zinc-900 dark:text-white tracking-tighter flex items-center gap-3">
                        <i data-lucide="check-square" class="w-8 h-8 text-emerald-500"></i> Daily Questions
                    </h2>
                    <div
                        class="flex items-center gap-2 bg-white/80 dark:bg-[#18181b]/80 backdrop-blur-md p-1.5 rounded-2xl shadow-sm border border-zinc-200 dark:border-zinc-700">
                        <button onclick="changeQuestionDate(-1)"
                            class="p-1.5 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-colors active:scale-95 text-zinc-600 dark:text-zinc-400"><i
                                data-lucide="chevron-left" class="w-4 h-4"></i></button>
                        <div id="questions-date-display"
                            class="text-xs font-bold text-zinc-800 dark:text-zinc-200 min-w-[100px] text-center">Today</div>
                        <button onclick="changeQuestionDate(1)"
                            class="p-1.5 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-colors active:scale-95 text-zinc-600 dark:text-zinc-400"><i
                                data-lucide="chevron-right" class="w-4 h-4"></i></button>
                    </div>
                </div>
        
                <!-- Stats Row (Streak & Target) -->
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <!-- Streak Card -->
                    <div
                        class="glass-card p-5 md:p-6 rounded-[2rem] flex flex-col md:flex-row items-center md:items-start gap-4 text-center md:text-left border-t-2 border-t-orange-500">
                        <div
                            class="w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center text-white shadow-lg shadow-orange-500/20 shrink-0 mx-auto md:mx-0">
                            <i data-lucide="flame" class="w-6 h-6"></i>
                        </div>
                        <div>
                            <div class="text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1 mt-1 md:mt-0">Streak
                            </div>
                            <div class="text-3xl md:text-2xl font-black text-zinc-900 dark:text-white"><span
                                    id="q-streak-count">0</span> <span class="text-sm font-bold text-zinc-400">Days</span></div>
                        </div>
                    </div>
                    <!-- Target Card -->
                    <div
                        class="glass-card p-5 md:p-6 rounded-[2rem] flex flex-col md:flex-row justify-between items-center gap-4 border-t-2 border-t-brand-500">
                        <div class="text-center md:text-left flex-1">
                            <div class="text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-2 mt-1 md:mt-0">Daily
                                Target</div>
                            <div class="flex items-center justify-center md:justify-start gap-1">
                                <input type="number" id="q-target-input" value="50" onchange="saveQuestionTarget(this.value)"
                                    class="w-16 bg-transparent text-3xl md:text-2xl font-black text-zinc-900 dark:text-white outline-none border-b-2 border-dashed border-zinc-300 dark:border-zinc-700 focus:border-brand-500 p-0 text-center transition-colors shadow-none hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg">
                                <span class="text-sm font-bold text-zinc-400 pb-1">Qs</span>
                            </div>
                        </div>
                        <div
                            class="w-12 h-12 rounded-2xl bg-gradient-to-br from-brand-400 to-brand-600 flex items-center justify-center text-white shadow-lg shadow-brand-500/20 shrink-0 hidden md:flex">
                            <i data-lucide="target" class="w-6 h-6"></i>
                        </div>
                    </div>
                </div>
        
                <div class="glass-card p-6 md:p-8 rounded-[2rem] mb-8">
                    <div id="questions-inputs" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"></div>
                    <div class="flex justify-between items-center border-t border-zinc-100 dark:border-zinc-800 pt-6">
                        <div>
                            <div class="text-[10px] font-bold text-zinc-400 uppercase tracking-widest">Total Solved</div>
                            <div id="questions-total-display"
                                class="text-4xl font-black text-zinc-900 dark:text-white tracking-tighter mt-1">
                                0 <span class="text-xl text-zinc-400 dark:text-zinc-500 font-bold">/ 50</span>
                            </div>
                        </div>
                        <button onclick="saveQuestionsLog()"
                            class="bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 font-bold py-3 px-8 rounded-xl shadow-md transition-all active:scale-95">Save
                            Update</button>
                    </div>
                </div>
        
                <h3 class="text-xl font-black text-zinc-900 dark:text-white tracking-tight mb-4 px-2">Last 7 Days Trend</h3>
                <div class="glass-card p-5 rounded-[2rem] w-full min-h-[200px]">
                    <canvas id="questionsChart"></canvas>
                </div>
            </div>
        </div>
        <!-- VIEW: Syllabus -->
        <div id="view-container-syllabus" class="view-section hidden flex-1 flex flex-col h-full overflow-hidden">
            <div class="flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar no-scrollbar">
                <div class="max-w-6xl mx-auto pb-32 mt-2">
                    <div class="flex flex-col lg:flex-row gap-8">
                        <!-- Syllabus Sidebar -->
                        <div class="w-full lg:w-80 shrink-0">
                            <div class="glass-card p-6 md:p-8 rounded-[2.5rem] sticky top-4">
                                <h3 class="text-xl font-black text-zinc-900 dark:text-white mb-6 tracking-tight">
                                    Syllabus Progress</h3>
                                <div id="overall-progress-data"></div>

                                <div class="mt-8 pt-6 border-t border-zinc-200/50 dark:border-zinc-800/50">
                                    <div class="relative mb-4">
                                        <input type="text" id="syllabus-search" placeholder="Search chapters..."
                                            class="w-full pl-10 p-3.5 rounded-2xl bg-zinc-100 dark:bg-zinc-800/50 text-zinc-900 dark:text-white placeholder-zinc-500 text-sm focus:ring-2 focus:ring-brand-500/50 outline-none transition-all font-medium border border-transparent dark:border-zinc-700/50">
                                        <i data-lucide="search" class="w-4 h-4 absolute left-4 top-4 text-zinc-400"></i>
                                    </div>
                                    <button id="btn-reset-syllabus"
                                        class="w-full py-3 text-xs font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition-colors border border-transparent hover:border-rose-200 dark:hover:border-rose-800/50">Reset
                                        Progress</button>
                                </div>
                            </div>
                        </div>

                        <!-- Syllabus Content -->
                        <div id="syllabus-content" class="flex-1 columns-1 lg:columns-2 gap-8 space-y-8"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Stats Menu -->
        <div id="mobile-stats-menu"
            class="md:hidden fixed bottom-24 right-4 bg-white/95 dark:bg-[#18181b]/95 backdrop-blur-xl rounded-[2rem] shadow-floating dark:shadow-floating-dark border border-zinc-200/80 dark:border-zinc-800 flex flex-col hidden opacity-0 transition-all duration-300 z-50 overflow-hidden scale-90 origin-bottom-right">
            <button onclick="switchView('stats-mocks'); closeMobileStatsMenu()"
                class="px-6 py-4 text-sm font-bold text-zinc-700 dark:text-zinc-300 border-b border-zinc-100 dark:border-zinc-800/50 text-left flex items-center gap-3 active:bg-zinc-100 dark:active:bg-zinc-800"><i
                    data-lucide="bar-chart" class="w-5 h-5 text-brand-500"></i> Mocks Data</button>
            <button onclick="switchView('stats-errors'); closeMobileStatsMenu()"
                class="px-6 py-4 text-sm font-bold text-zinc-700 dark:text-zinc-300 border-b border-zinc-100 dark:border-zinc-800/50 text-left flex items-center gap-3 active:bg-zinc-100 dark:active:bg-zinc-800"><i
                    data-lucide="alert-triangle" class="w-5 h-5 text-rose-500"></i> Error Tracking</button>
            <button onclick="switchView('stats-questions'); closeMobileStatsMenu()"
                class="px-6 py-4 text-sm font-bold text-zinc-700 dark:text-zinc-300 text-left flex items-center gap-3 active:bg-zinc-100 dark:active:bg-zinc-800"><i
                    data-lucide="check-square" class="w-5 h-5 text-emerald-500"></i> Daily Questions</button>
        </div>

        <!-- Floating Mobile Dock (iOS Style) -->
        <div id="mobile-bottom-nav"
            class="md:hidden fixed bottom-6 left-4 right-4 z-50 transition-transform duration-300">
            <div
                class="glass rounded-[2rem] shadow-floating dark:shadow-floating-dark flex justify-around items-center h-[72px] px-2 border border-white/20 dark:border-white/10">
                <button onclick="switchView('calendar')" id="nav-mobile-calendar"
                    class="flex flex-col items-center justify-center w-full h-full text-brand-600 dark:text-brand-400 transition-colors">
                    <i data-lucide="calendar" class="w-6 h-6"></i>
                </button>
                <button onclick="switchView('weekly')" id="nav-mobile-weekly"
                    class="flex flex-col items-center justify-center w-full h-full text-zinc-400 dark:text-zinc-500 transition-colors">
                    <i data-lucide="crosshair" class="w-6 h-6"></i>
                </button>
                <!-- Elevated Main FAB -->
                <div class="relative -top-6">
                    <button onclick="openAddTaskModal()"
                        class="w-16 h-16 bg-zinc-900 dark:bg-white rounded-full text-white dark:text-zinc-900 shadow-2xl shadow-zinc-900/40 dark:shadow-black/50 flex items-center justify-center active:scale-90 transition-transform ring-4 ring-white/40 dark:ring-black/40 backdrop-blur-md">
                        <i data-lucide="plus" class="w-8 h-8"></i>
                    </button>
                </div>
                <button onclick="switchView('timer')" id="nav-mobile-timer"
                    class="flex flex-col items-center justify-center w-full h-full text-zinc-400 dark:text-zinc-500 transition-colors">
                    <i data-lucide="timer" class="w-6 h-6"></i>
                </button>
                <button onclick="toggleMobileStatsMenu()" id="nav-mobile-stats"
                    class="flex flex-col items-center justify-center w-full h-full text-zinc-400 dark:text-zinc-500 transition-colors"><i
                        data-lucide="bar-chart-2" class="w-6 h-6"></i></button>
            </div>
        </div>

    </main>

    <!-- Modals -->

    <!-- Manual Log Modal -->
    <div id="manual-log-modal"
        class="fixed inset-0 z-[120] flex items-center justify-center modal-backdrop hidden opacity-0 transition-opacity duration-300 px-4">
        <div
            class="bg-white dark:bg-[#18181b] rounded-[2.5rem] shadow-2xl p-8 w-full max-w-sm transform scale-95 transition-transform duration-300 border border-zinc-200/50 dark:border-zinc-800/50">
            <h3 class="text-xl font-black text-zinc-900 dark:text-white mb-6 tracking-tight">Log Session</h3>
            <div class="space-y-5">
                <div>
                    <label
                        class="block text-[10px] font-bold text-zinc-500 mb-1.5 uppercase tracking-widest">Subject</label>
                    <select id="manual-log-subject"
                        class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3.5 text-sm outline-none dark:text-white font-medium shadow-inner-light dark:shadow-inner-dark appearance-none"></select>
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-zinc-500 mb-1.5 uppercase tracking-widest">Duration
                        (Mins)</label>
                    <input type="number" id="manual-log-duration"
                        class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3.5 text-sm outline-none dark:text-white font-medium shadow-inner-light dark:shadow-inner-dark"
                        placeholder="e.g. 60">
                </div>
                <div>
                    <label
                        class="block text-[10px] font-bold text-zinc-500 mb-1.5 uppercase tracking-widest">Notes</label>
                    <textarea id="manual-log-notes" rows="2"
                        class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3 text-sm outline-none dark:text-white font-medium shadow-inner-light dark:shadow-inner-dark resize-none placeholder:text-zinc-400"
                        placeholder="What did you study?"></textarea>
                </div>
            </div>
            <div class="flex gap-3 justify-end mt-8">
                <button onclick="closeManualLogModal()"
                    class="px-5 py-2.5 rounded-xl text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 font-bold text-sm transition-colors">Cancel</button>
                <button onclick="saveManualLog()"
                    class="px-6 py-2.5 rounded-xl bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 font-bold text-sm shadow-md transition-all active:scale-95">Save</button>
            </div>
        </div>
    </div>

    <!-- Add Task Modal (Bottom Sheet on Mobile) -->
    <div id="add-task-modal"
        class="fixed inset-0 z-[100] flex items-end justify-center modal-backdrop hidden opacity-0 transition-opacity duration-400">
        <div
            class="bg-white dark:bg-[#18181b] w-full mobile-sheet shadow-2xl h-[85vh] border-t border-zinc-200/50 dark:border-zinc-800 flex flex-col relative pb-safe">
            <div class="pt-4 pb-2 w-full flex justify-center touch-pan-y" id="add-task-drag-handle">
                <div class="drag-handle"></div>
            </div>
            <div class="px-6 pb-6 flex-1 overflow-y-auto custom-scrollbar no-scrollbar">
                <div class="flex justify-between items-center mb-6 mt-2">
                    <h2 class="text-2xl font-black text-zinc-900 dark:text-white tracking-tight">New Task</h2>
                    <button onclick="closeAddTaskModal()"
                        class="p-2 bg-zinc-100 dark:bg-zinc-800 rounded-full text-zinc-400 hover:text-rose-500 transition-colors"><i
                            data-lucide="x" class="w-5 h-5"></i></button>
                </div>
                <form id="add-task-form-mobile" class="space-y-6">
                    <input type="date" id="task-date-mobile"
                        class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-2xl px-5 py-4 text-base focus:ring-2 focus:ring-brand-500/30 outline-none dark:text-white transition-all appearance-none font-medium shadow-inner-light dark:shadow-inner-dark">
                    <div>
                        <div class="flex justify-between items-center mb-3">
                            <label
                                class="block text-[10px] font-bold text-zinc-500 uppercase tracking-widest">Subject</label>
                            <button type="button" onclick="openCustomSubjectModal()"
                                class="text-[10px] font-bold text-brand-600 dark:text-brand-400 bg-brand-50 dark:bg-brand-900/20 px-2.5 py-1 rounded-md border border-brand-100 dark:border-brand-900/50 transition-colors">+
                                Custom</button>
                        </div>
                        <div id="subject-selector-mobile" class="grid grid-cols-2 gap-3"></div>
                    </div>
                    <div id="mock-fields-container-mobile"
                        class="hidden animate-slide-up space-y-4 p-5 bg-fuchsia-50 dark:bg-fuchsia-900/10 rounded-2xl border border-fuchsia-100 dark:border-fuchsia-900/30">
                        <div class="flex items-center gap-2 mb-2 text-fuchsia-700 dark:text-fuchsia-300"><i
                                data-lucide="trophy" class="w-5 h-5"></i><span
                                class="text-sm font-bold uppercase tracking-wide">Score Details</span></div>
                    </div>
                    <textarea id="task-input-mobile" rows="3" placeholder="What's the goal?"
                        class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-2xl px-5 py-4 text-base focus:ring-2 focus:ring-brand-500/30 outline-none dark:text-white resize-none transition-all appearance-none font-medium shadow-inner-light dark:shadow-inner-dark placeholder:text-zinc-400"></textarea>
                    <button id="btn-add-task-mobile" type="submit"
                        class="w-full bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 font-bold py-4 rounded-2xl shadow-floating dark:shadow-white/10 transition-all active:scale-95 flex items-center justify-center gap-2 text-lg mt-2">
                        <i data-lucide="plus" class="w-5 h-5"></i> <span>Add to Plan</span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Day View Modal -->
    <div id="day-view-modal"
        class="fixed inset-0 z-[110] flex items-end md:items-center justify-center modal-backdrop hidden opacity-0 transition-opacity duration-400">
        <div
            class="bg-white dark:bg-[#18181b] w-full md:w-[480px] md:rounded-[2.5rem] mobile-sheet md:transform md:scale-95 transition-transform duration-400 shadow-2xl h-[85vh] md:h-auto md:max-h-[85vh] border-t md:border border-zinc-200/50 dark:border-zinc-800 flex flex-col relative overflow-hidden pb-safe">
            <div class="md:hidden pt-4 pb-2 w-full flex justify-center touch-pan-y" id="day-view-drag-handle">
                <div class="drag-handle"></div>
            </div>
            <div class="px-6 md:px-8 pb-6 md:pt-8 flex flex-col h-full overflow-hidden">
                <div class="flex justify-between items-start mb-8 mt-2 md:mt-0">
                    <div>
                        <h2 id="day-view-date"
                            class="text-3xl font-black text-zinc-900 dark:text-white tracking-tighter">--</h2>
                        <p class="text-sm text-zinc-500 font-medium mt-1">Your daily focus</p>
                    </div>
                    <button onclick="closeDayView()"
                        class="p-2 bg-zinc-100 dark:bg-zinc-800 rounded-full text-zinc-400 hover:text-rose-500 transition-colors"><i
                            data-lucide="x" class="w-6 h-6"></i></button>
                </div>
                <!-- Support internal dragging for reordering inside Day View context -->
                <div id="day-view-tasks"
                    class="space-y-3 overflow-y-auto pr-2 custom-scrollbar flex-1 min-h-0 touch-pan-y pb-4" ondragover="handleDragOverDayView(event)" ondrop="handleDropDayView(event, currentDayViewDate)"></div>
                <div class="pt-4 mt-auto border-t border-zinc-100 dark:border-zinc-800">
                    <button onclick="addTaskFromDayView()"
                        class="w-full py-4 bg-zinc-50 dark:bg-zinc-900 text-brand-600 dark:text-brand-400 font-bold rounded-2xl flex items-center justify-center gap-2 active:scale-95 transition-all border border-zinc-200/50 dark:border-zinc-800 hover:border-brand-200 dark:hover:border-brand-800/50">
                        <i data-lucide="plus" class="w-5 h-5"></i> Add Task for this Day
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Subject Modal -->
    <div id="custom-subject-modal"
        class="fixed inset-0 z-[130] flex items-center justify-center modal-backdrop hidden opacity-0 transition-opacity duration-300 px-4">
        <div
            class="bg-white dark:bg-[#18181b] rounded-[2.5rem] shadow-2xl p-8 w-full max-w-sm transform scale-95 transition-transform duration-300 border border-zinc-200/50 dark:border-zinc-800">
            <h3 class="text-xl font-black text-zinc-900 dark:text-white mb-6 tracking-tight">Subjects</h3>
            <input type="text" id="custom-subject-input" placeholder="e.g. History, English"
                class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3.5 text-sm focus:ring-2 focus:ring-brand-500/30 outline-none dark:text-white mb-4 appearance-none font-medium shadow-inner-light dark:shadow-inner-dark">
            <div class="flex gap-3 justify-end mb-8">
                <button onclick="closeCustomSubjectModal()"
                    class="px-5 py-2.5 rounded-xl text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 font-bold text-sm transition-colors">Done</button>
                <button onclick="confirmAddSubject()"
                    class="px-6 py-2.5 rounded-xl bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 font-bold text-sm shadow-md transition-all active:scale-95">Add</button>
            </div>
            <div class="border-t border-zinc-100 dark:border-zinc-800 pt-6">
                <label class="block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3">Custom
                    Subjects</label>
                <div id="custom-subjects-list" class="space-y-2 max-h-[160px] overflow-y-auto custom-scrollbar pr-2">
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal"
        class="fixed inset-0 z-[120] flex items-end md:items-center justify-center modal-backdrop hidden opacity-0 transition-opacity duration-400">
        <div
            class="bg-white dark:bg-[#18181b] w-full md:w-[500px] md:rounded-[2.5rem] mobile-sheet md:transform md:scale-95 transition-transform duration-400 border-t md:border border-zinc-200/50 dark:border-zinc-800 h-[90vh] flex flex-col pb-safe">
            <div class="p-6 md:p-8 pb-4 shrink-0 flex justify-between items-center touch-pan-y"
                id="settings-drag-handle">
                <div class="md:hidden absolute top-3 left-1/2 -translate-x-1/2 drag-handle"></div>
                <h3 class="text-2xl font-black text-zinc-900 dark:text-white tracking-tight mt-2 md:mt-0">Settings</h3>
                <button onclick="closeSettings()"
                    class="text-zinc-400 hover:text-zinc-900 dark:hover:text-white p-2 bg-zinc-100 dark:bg-zinc-800 rounded-full transition-colors mt-2 md:mt-0"><i
                        data-lucide="x" class="w-5 h-5"></i></button>
            </div>

            <div class="px-6 md:px-8 space-y-8 flex-1 overflow-y-auto custom-scrollbar no-scrollbar pb-6">
                <div class="space-y-3">
                    <label
                        class="block text-[10px] font-bold text-zinc-400 uppercase tracking-widest">Preferences</label>
                    <div
                        class="p-4 bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl flex items-center justify-between border border-zinc-100 dark:border-zinc-800">
                        <span class="font-bold text-sm text-zinc-700 dark:text-zinc-200">Dark Mode</span>
                        <button id="theme-toggle" onclick="toggleTheme()"
                            class="relative w-12 h-7 bg-zinc-200 dark:bg-zinc-700 rounded-full transition-all duration-300">
                            <div id="theme-knob"
                                class="absolute left-1 top-1 w-5 h-5 bg-white rounded-full transition-transform shadow-sm">
                            </div>
                        </button>
                    </div>
                    <div
                        class="p-4 bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl flex items-center justify-between border border-zinc-100 dark:border-zinc-800">
                        <div>
                            <span class="font-bold text-sm text-zinc-700 dark:text-zinc-200 block">Lite Mode</span>
                            <span class="text-[10px] text-zinc-500 font-medium">Disables blurs & animations</span>
                        </div>
                        <button id="litemode-toggle" onclick="toggleLiteModeSetting()"
                            class="relative w-12 h-7 bg-zinc-200 dark:bg-zinc-700 rounded-full transition-all duration-300">
                            <div id="litemode-knob"
                                class="absolute left-1 top-1 w-5 h-5 bg-white rounded-full transition-transform shadow-sm"></div>
                        </button>
                    </div>
                    <div
                        class="p-4 bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl flex items-center justify-between border border-zinc-100 dark:border-zinc-800">
                        <span class="font-bold text-sm text-zinc-700 dark:text-zinc-200">Show Countdown</span>
                        <button id="countdown-toggle" onclick="toggleCountdownSetting()"
                            class="relative w-12 h-7 bg-zinc-200 dark:bg-zinc-700 rounded-full transition-all duration-300">
                            <div id="countdown-knob"
                                class="absolute left-1 top-1 w-5 h-5 bg-white rounded-full transition-transform shadow-sm">
                            </div>
                        </button>
                    </div>
                </div>

                <div class="space-y-3">
                    <label class="block text-[10px] font-bold text-zinc-400 uppercase tracking-widest">Subject Colors</label>
                    <div id="settings-subject-colors" class="space-y-2"></div>
                </div>

                <div class="space-y-3">
                    <label
                        class="block text-[10px] font-bold text-zinc-400 uppercase tracking-widest">Atmosphere</label>
                    <div class="flex gap-2 overflow-x-auto pb-2 scrollbar-hide no-scrollbar -mx-2 px-2 snap-x">
                        <button onclick="setPresetBg('')"
                            class="snap-start shrink-0 px-5 py-3 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-xs font-bold text-zinc-600 dark:text-zinc-300 border border-transparent hover:border-brand-500 transition-all">Minimal</button>
                        <button
                            onclick="setPresetBg('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2564&auto=format&fit=crop')"
                            class="snap-start shrink-0 px-5 py-3 rounded-xl bg-brand-50 dark:bg-brand-900/20 text-xs font-bold text-brand-700 dark:text-brand-300 border border-transparent hover:border-brand-500 transition-all">Abstract</button>
                        <button
                            onclick="setPresetBg('https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?q=80&w=2342&auto=format&fit=crop')"
                            class="snap-start shrink-0 px-5 py-3 rounded-xl bg-zinc-800 text-xs font-bold text-white border border-transparent hover:border-brand-500 transition-all">Space</button>
                        <button
                            onclick="setPresetBg('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=2346&auto=format&fit=crop')"
                            class="snap-start shrink-0 px-5 py-3 rounded-xl bg-sky-100 dark:bg-sky-900/20 text-xs font-bold text-sky-800 dark:text-sky-300 border border-transparent hover:border-brand-500 transition-all">Ocean</button>
                    </div>
                    <input type="text" id="settings-bg-url" oninput="markSettingsDirty()"
                        placeholder="Or paste custom image URL..."
                        class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3 text-sm outline-none dark:text-white appearance-none font-medium">
                </div>

                <div class="space-y-4">
                    <label class="block text-[10px] font-bold text-zinc-400 uppercase tracking-widest">Exam
                        Target</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setExamType('JEE Main')" id="btn-jee"
                            class="p-3 rounded-xl text-xs font-bold border border-zinc-200 dark:border-zinc-700 transition-colors">JEE
                            Main</button>
                        <button onclick="setExamType('NEET')" id="btn-neet"
                            class="p-3 rounded-xl text-xs font-bold border border-zinc-200 dark:border-zinc-700 transition-colors">NEET</button>
                        <button onclick="setExamType('JEE Advanced')" id="btn-jeeadv"
                            class="p-3 rounded-xl text-xs font-bold border border-zinc-200 dark:border-zinc-700 transition-colors">JEE
                            Adv</button>
                        <button onclick="setExamType('Custom')" id="btn-custom"
                            class="p-3 rounded-xl text-xs font-bold border border-zinc-200 dark:border-zinc-700 transition-colors">Custom</button>
                    </div>

                    <div id="jee-session-container"
                        class="hidden bg-brand-50 dark:bg-brand-900/10 p-4 rounded-2xl border border-brand-100 dark:border-brand-900/30 animate-slide-up">
                        <label
                            class="block text-[10px] font-bold text-brand-700 dark:text-brand-300 uppercase tracking-widest mb-3">Target
                            Session</label>
                        <div class="flex gap-2">
                            <button onclick="setSession('Jan')" id="btn-session-jan"
                                class="flex-1 py-2 rounded-xl text-xs font-bold border border-brand-200 dark:border-brand-700 transition-colors bg-white dark:bg-zinc-800">Jan</button>
                            <button onclick="setSession('Apr')" id="btn-session-apr"
                                class="flex-1 py-2 rounded-xl text-xs font-bold border border-brand-200 dark:border-brand-700 transition-colors bg-white dark:bg-zinc-800">April</button>
                        </div>
                    </div>

                    <div id="custom-date-container"
                        class="hidden bg-zinc-50 dark:bg-zinc-900/50 p-4 rounded-2xl border border-zinc-200/50 dark:border-zinc-800 animate-slide-up">
                        <label class="block text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-2">Manual
                            Target Date</label>
                        <input type="date" id="settings-custom-date" onchange="markSettingsDirty()"
                            class="w-full bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl px-4 py-3 text-sm outline-none dark:text-white font-medium">
                    </div>

                    <select id="settings-year" onchange="updateTargetDateConfig(); markSettingsDirty()"
                        class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200/80 dark:border-zinc-800 rounded-xl px-4 py-3.5 text-sm outline-none dark:text-white appearance-none font-bold">
                        <option value="2026">Target Year: 2026</option>
                        <option value="2027">Target Year: 2027</option>
                        <option value="2028">Target Year: 2028</option>
                    </select>
                </div>

                <div class="space-y-3 pt-4 border-t border-zinc-100 dark:border-zinc-800">
                    <label class="block text-[10px] font-bold text-zinc-400 uppercase tracking-widest">Data Management</label>
                    <div class="flex gap-2">
                        <button onclick="exportData()"
                            class="flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 rounded-xl text-xs font-bold text-zinc-700 dark:text-zinc-300 transition-colors hover:bg-zinc-200 dark:hover:bg-zinc-700 flex items-center justify-center gap-2 border border-transparent hover:border-zinc-300 dark:hover:border-zinc-600"><i
                                data-lucide="download" class="w-4 h-4"></i> Export Data</button>
                        <button onclick="document.getElementById('import-file').click()"
                            class="flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 rounded-xl text-xs font-bold text-zinc-700 dark:text-zinc-300 transition-colors hover:bg-zinc-200 dark:hover:bg-zinc-700 flex items-center justify-center gap-2 border border-transparent hover:border-zinc-300 dark:hover:border-zinc-600"><i
                                data-lucide="upload" class="w-4 h-4"></i> Import Data</button>
                        <input type="file" id="import-file" accept=".json" class="hidden" onchange="importData(event)">
                    </div>
                </div>

                <div class="pt-4 border-t border-zinc-100 dark:border-zinc-800">
                    <button onclick="handleSignOut()"
                        class="w-full py-4 text-rose-500 font-bold bg-rose-50 dark:bg-rose-900/10 rounded-2xl flex items-center justify-center gap-2 border border-rose-100 dark:border-rose-900/30 active:scale-95 transition-transform hover:bg-rose-100 dark:hover:bg-rose-900/30"><i
                            data-lucide="log-out" class="w-5 h-5"></i> Sign Out</button>
                </div>
            </div>

            <div
                class="p-6 border-t border-zinc-100 dark:border-zinc-800/50 bg-white/80 dark:bg-[#18181b]/80 backdrop-blur-md shrink-0">
                <div id="unsaved-changes-indicator"
                    class="hidden flex items-center gap-2 mb-3 text-amber-600 dark:text-amber-400 text-xs font-bold justify-center animate-bounce-slight">
                    <i data-lucide="alert-circle" class="w-4 h-4"></i> Unsaved Changes
                </div>
                <button id="save-settings-btn" onclick="saveSettings()"
                    class="w-full bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 font-bold py-4 rounded-2xl shadow-floating dark:shadow-white/10 transition-all active:scale-95 text-base">Done</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirm-modal"
        class="fixed inset-0 z-[140] flex items-center justify-center modal-backdrop hidden opacity-0 transition-opacity duration-200 px-4">
        <div
            class="bg-white dark:bg-[#18181b] rounded-3xl shadow-2xl p-6 w-full max-w-sm transform scale-95 transition-transform duration-200 border border-zinc-200/50 dark:border-zinc-800">
            <h3 class="text-xl font-black text-zinc-900 dark:text-white mb-2">Delete Item?</h3>
            <p class="text-zinc-500 text-sm mb-8 font-medium">This action cannot be undone.</p>
            <div class="flex gap-3 justify-end">
                <button onclick="closeConfirmModal()"
                    class="px-5 py-2.5 rounded-xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 font-bold text-sm transition-colors">Cancel</button>
                <button id="confirm-delete-btn"
                    class="px-6 py-2.5 rounded-xl bg-rose-500 hover:bg-rose-600 text-white font-bold text-sm shadow-md active:scale-95 transition-all">Delete</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast"
        class="fixed top-safe mt-4 md:mt-0 md:top-auto md:bottom-28 left-1/2 md:left-auto md:right-8 transform -translate-x-1/2 md:translate-x-0 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 text-sm font-bold px-6 py-3.5 rounded-full shadow-floating opacity-0 translate-y-[-20px] md:translate-y-4 transition-all duration-400 pointer-events-none flex items-center gap-3 z-[150] min-w-max border border-zinc-800 dark:border-zinc-200">
        <div class="w-5 h-5 rounded-full bg-green-500 flex items-center justify-center"><i data-lucide="check"
                class="w-3 h-3 text-white"></i></div><span id="toast-msg">Success</span>
    </div>


    <!-- Edit Mock Modal -->
    <div id="edit-mock-modal"
        class="fixed inset-0 z-[130] flex items-center justify-center modal-backdrop hidden opacity-0 transition-opacity duration-300 px-4">
        <div
            class="bg-white dark:bg-[#18181b] rounded-[2.5rem] shadow-2xl p-8 w-full max-w-sm transform scale-95 transition-transform duration-300 border border-zinc-200/50 dark:border-zinc-800">
            <div class="flex items-center gap-2 mb-2"><i data-lucide="trophy" class="w-5 h-5 text-brand-500"></i>
                <h3 class="text-xl font-black text-zinc-900 dark:text-white">Edit Score</h3>
            </div>
            <p class="text-xs font-bold text-zinc-400 mb-6 uppercase tracking-widest truncate" id="edit-mock-title">
                Update subject marks</p>
            <input type="hidden" id="edit-mock-id">
            <div id="edit-mock-inputs" class="grid grid-cols-3 gap-3 mb-6"></div>
            <div
                class="bg-brand-50 dark:bg-brand-900/20 p-4 rounded-2xl flex justify-between items-center mb-8 border border-brand-100 dark:border-brand-900/30">
                <span class="text-[10px] font-bold text-brand-800 dark:text-brand-300 uppercase tracking-widest">Total
                    Score</span>
                <span id="edit-mock-total" class="text-3xl font-black text-brand-600 dark:text-brand-400">0</span>
            </div>
            <div class="flex gap-3 justify-end">
                <button onclick="closeEditMockModal()"
                    class="px-5 py-2.5 rounded-xl text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 font-bold text-sm transition-colors">Cancel</button>
                <button onclick="saveMockBreakdown()"
                    class="px-6 py-2.5 rounded-xl bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 font-bold text-sm shadow-md transition-all active:scale-95">Update</button>
            </div>
        </div>
    </div>
    <script type="module" src="script.js"></script>
</body>

</html>
